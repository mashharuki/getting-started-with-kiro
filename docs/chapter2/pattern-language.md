# è¨­è¨ˆåŸå‰‡ã«å¿…è¦ãªãƒ‘ã‚¿ãƒ³è¨€èªã®è§£èª¬ã‚’ä½œã‚ã†

è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã€ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™ºã«ãŠã‘ã‚‹å…±é€šã®å•é¡Œã«å¯¾ã™ã‚‹å†åˆ©ç”¨å¯èƒ½ãªè§£æ±ºç­–ã§ã™ã€‚ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³ã®åŸºæœ¬æ¦‚å¿µã‚’ç†è§£ã—ã€Kiroã§ã®æ´»ç”¨æ–¹æ³•ã‚’å­¦ç¿’ã—ã¾ã™ã€‚ãƒ‘ã‚¿ãƒ¼ãƒ³è¨€èªã‚’ç¿’å¾—ã™ã‚‹ã“ã¨ã§ã€ã‚ˆã‚ŠåŠ¹ç‡çš„ã§ä¿å®ˆæ€§ã®é«˜ã„ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚’é–‹ç™ºã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

## å­¦ç¿’ç›®æ¨™

- è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³ã®åŸºæœ¬æ¦‚å¿µã¨é‡è¦æ€§ã‚’ç†è§£ã™ã‚‹
- ä¸»è¦ãªè¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³ã®ç¨®é¡ã¨ç”¨é€”ã‚’å­¦ã¶
- Kiroã§ã®ãƒ‘ã‚¿ãƒ¼ãƒ³æ´»ç”¨æ–¹æ³•ã‚’ç¿’å¾—ã™ã‚‹
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’æ§‹ç¯‰ã™ã‚‹æ–¹æ³•ã‚’èº«ã«ã¤ã‘ã‚‹

## ãƒ‘ã‚¿ãƒ¼ãƒ³è¨€èªã¨ã¯

### æ¦‚å¿µ

**ãƒ‘ã‚¿ãƒ¼ãƒ³è¨€èª**ã¯ã€ç‰¹å®šã®æ–‡è„ˆã«ãŠã‘ã‚‹å•é¡Œã¨ãã®è§£æ±ºç­–ã‚’ä½“ç³»åŒ–ã—ãŸçŸ¥è­˜ä½“ç³»ã§ã™ã€‚ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™ºã§ã¯ã€ç¹°ã‚Šè¿”ã—ç¾ã‚Œã‚‹è¨­è¨ˆä¸Šã®å•é¡Œã«å¯¾ã™ã‚‹å®Ÿè¨¼æ¸ˆã¿ã®è§£æ±ºç­–ã¨ã—ã¦æ´»ç”¨ã•ã‚Œã¾ã™ã€‚

### ãƒ‘ã‚¿ãƒ¼ãƒ³ã®æ§‹æˆè¦ç´ 

```mermaid
graph TD
    A[ãƒ‘ã‚¿ãƒ¼ãƒ³] --> B[åå‰]
    A --> C[å•é¡Œ]
    A --> D[æ–‡è„ˆ]
    A --> E[è§£æ±ºç­–]
    A --> F[çµæœ]
    
    B --> G[è­˜åˆ¥ã—ã‚„ã™ã„åå‰]
    C --> H[è§£æ±ºã™ã¹ãèª²é¡Œ]
    D --> I[é©ç”¨æ¡ä»¶]
    E --> J[å…·ä½“çš„ãªå®Ÿè£…æ–¹æ³•]
    F --> K[åˆ©ç‚¹ã¨åˆ¶ç´„]
    
    style A fill:#ff9800
    style G fill:#4caf50
    style H fill:#4caf50
    style I fill:#4caf50
    style J fill:#4caf50
    style K fill:#4caf50
```

### ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ä¾¡å€¤

- **å†åˆ©ç”¨æ€§**: å®Ÿè¨¼æ¸ˆã¿ã®è§£æ±ºç­–ã®å†åˆ©ç”¨
- **ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³**: å…±é€šè¨€èªã«ã‚ˆã‚‹åŠ¹ç‡çš„ãªæ„æ€ç–é€š
- **å“è³ªå‘ä¸Š**: ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã®æ¨™æº–åŒ–
- **å­¦ç¿’åŠ¹ç‡**: ä½“ç³»åŒ–ã•ã‚ŒãŸçŸ¥è­˜ã®ç¿’å¾—

## ä¸»è¦ãªè¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³ã®åˆ†é¡

### 1. ç”Ÿæˆãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆCreational Patternsï¼‰

ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ç”Ÿæˆã«é–¢ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³

#### Singleton ãƒ‘ã‚¿ãƒ¼ãƒ³

**å•é¡Œ**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã§1ã¤ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ã¿ãŒå¿…è¦

**è§£æ±ºç­–**:
```typescript
class DatabaseConnection {
  private static instance: DatabaseConnection;
  private constructor() {}
  
  public static getInstance(): DatabaseConnection {
    if (!DatabaseConnection.instance) {
      DatabaseConnection.instance = new DatabaseConnection();
    }
    return DatabaseConnection.instance;
  }
}
```

**Kiroã§ã®æ´»ç”¨**:
```
ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã®Singletonãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„ã€‚
ä»¥ä¸‹ã®è¦ä»¶ã‚’æº€ãŸã—ã¦ãã ã•ã„ï¼š
- ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¯1ã¤ã®ã¿
- ã‚¹ãƒ¬ãƒƒãƒ‰ã‚»ãƒ¼ãƒ•ãªå®Ÿè£…
- æ¥ç¶šãƒ—ãƒ¼ãƒ«ã®ç®¡ç†
```

#### Factory ãƒ‘ã‚¿ãƒ¼ãƒ³

**å•é¡Œ**: å…·ä½“çš„ãªã‚¯ãƒ©ã‚¹ã‚’æŒ‡å®šã›ãšã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç”Ÿæˆã—ãŸã„

**è§£æ±ºç­–**:
```typescript
interface PaymentProcessor {
  process(amount: number): Promise<boolean>;
}

class PaymentFactory {
  static create(type: 'credit' | 'paypal' | 'bank'): PaymentProcessor {
    switch (type) {
      case 'credit':
        return new CreditCardProcessor();
      case 'paypal':
        return new PayPalProcessor();
      case 'bank':
        return new BankTransferProcessor();
      default:
        throw new Error(`Unknown payment type: ${type}`);
    }
  }
}
```

### 2. æ§‹é€ ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆStructural Patternsï¼‰

ã‚¯ãƒ©ã‚¹ã‚„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®çµ„ã¿åˆã‚ã›ã«é–¢ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³

#### Adapter ãƒ‘ã‚¿ãƒ¼ãƒ³

**å•é¡Œ**: äº’æ›æ€§ã®ãªã„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æŒã¤ã‚¯ãƒ©ã‚¹ã‚’é€£æºã•ã›ãŸã„

**è§£æ±ºç­–**:
```typescript
// æ—¢å­˜ã®ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
class ThirdPartyEmailService {
  sendEmail(to: string, subject: string, body: string): void {
    // å®Ÿè£…
  }
}

// ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
interface EmailService {
  send(message: EmailMessage): Promise<void>;
}

// ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼
class EmailServiceAdapter implements EmailService {
  constructor(private thirdPartyService: ThirdPartyEmailService) {}
  
  async send(message: EmailMessage): Promise<void> {
    this.thirdPartyService.sendEmail(
      message.recipient,
      message.subject,
      message.content
    );
  }
}
```

#### Decorator ãƒ‘ã‚¿ãƒ¼ãƒ³

**å•é¡Œ**: ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å‹•çš„ã«æ©Ÿèƒ½ã‚’è¿½åŠ ã—ãŸã„

**è§£æ±ºç­–**:
```typescript
interface Coffee {
  cost(): number;
  description(): string;
}

class SimpleCoffee implements Coffee {
  cost(): number { return 10; }
  description(): string { return "Simple coffee"; }
}

class MilkDecorator implements Coffee {
  constructor(private coffee: Coffee) {}
  
  cost(): number { return this.coffee.cost() + 2; }
  description(): string { return this.coffee.description() + ", milk"; }
}
```

### 3. æŒ¯ã‚‹èˆã„ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆBehavioral Patternsï¼‰

ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆé–“ã®ç›¸äº’ä½œç”¨ã«é–¢ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³

#### Observer ãƒ‘ã‚¿ãƒ¼ãƒ³

**å•é¡Œ**: ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®çŠ¶æ…‹å¤‰åŒ–ã‚’è¤‡æ•°ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«é€šçŸ¥ã—ãŸã„

**è§£æ±ºç­–**:
```typescript
interface Observer {
  update(data: any): void;
}

class Subject {
  private observers: Observer[] = [];
  
  subscribe(observer: Observer): void {
    this.observers.push(observer);
  }
  
  unsubscribe(observer: Observer): void {
    this.observers = this.observers.filter(obs => obs !== observer);
  }
  
  notify(data: any): void {
    this.observers.forEach(observer => observer.update(data));
  }
}
```

#### Strategy ãƒ‘ã‚¿ãƒ¼ãƒ³

**å•é¡Œ**: ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’å‹•çš„ã«åˆ‡ã‚Šæ›¿ãˆãŸã„

**è§£æ±ºç­–**:
```typescript
interface SortStrategy {
  sort(data: number[]): number[];
}

class QuickSort implements SortStrategy {
  sort(data: number[]): number[] {
    // ã‚¯ã‚¤ãƒƒã‚¯ã‚½ãƒ¼ãƒˆã®å®Ÿè£…
    return data;
  }
}

class MergeSort implements SortStrategy {
  sort(data: number[]): number[] {
    // ãƒãƒ¼ã‚¸ã‚½ãƒ¼ãƒˆã®å®Ÿè£…
    return data;
  }
}

class Sorter {
  constructor(private strategy: SortStrategy) {}
  
  setStrategy(strategy: SortStrategy): void {
    this.strategy = strategy;
  }
  
  sort(data: number[]): number[] {
    return this.strategy.sort(data);
  }
}
```

## Kiroã§ã®ãƒ‘ã‚¿ãƒ¼ãƒ³æ´»ç”¨æ–¹æ³•

### ã‚¹ãƒ†ãƒƒãƒ—1: ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æ§‹ç¯‰

#### 1.1 Steeringãƒ•ã‚¡ã‚¤ãƒ«ã§ã®ãƒ‘ã‚¿ãƒ¼ãƒ³å®šç¾©

`.kiro/steering/design-patterns.md`ã‚’ä½œæˆï¼š

```markdown
---
inclusion: always
---

# è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³ã‚¬ã‚¤ãƒ‰

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ä½¿ç”¨ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³

### ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹å±¤
- **Repository ãƒ‘ã‚¿ãƒ¼ãƒ³**: ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ã®æŠ½è±¡åŒ–
- **Unit of Work ãƒ‘ã‚¿ãƒ¼ãƒ³**: ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†

### ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å±¤
- **Service ãƒ‘ã‚¿ãƒ¼ãƒ³**: ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®é›†ç´„
- **Command ãƒ‘ã‚¿ãƒ¼ãƒ³**: æ“ä½œã®æŠ½è±¡åŒ–

### ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤
- **MVC ãƒ‘ã‚¿ãƒ¼ãƒ³**: é–¢å¿ƒã®åˆ†é›¢
- **Observer ãƒ‘ã‚¿ãƒ¼ãƒ³**: çŠ¶æ…‹å¤‰åŒ–ã®é€šçŸ¥

## å®Ÿè£…ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

### Repository ãƒ‘ã‚¿ãƒ¼ãƒ³
```typescript
interface UserRepository {
  findById(id: string): Promise<User | null>;
  save(user: User): Promise<void>;
  delete(id: string): Promise<void>;
}

class DatabaseUserRepository implements UserRepository {
  // å®Ÿè£…
}
```
```

#### 1.2 ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä½œæˆ

ã‚ˆãä½¿ç”¨ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½œæˆï¼š

```
Kiroã®ãƒãƒ£ãƒƒãƒˆã§ä»¥ä¸‹ã®ã‚ˆã†ã«å…¥åŠ›ã—ã¦ãã ã•ã„ï¼š

Repository ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚
ä»¥ä¸‹ã®è¦ä»¶ã‚’æº€ãŸã—ã¦ãã ã•ã„ï¼š
- TypeScriptå¯¾å¿œ
- éåŒæœŸå‡¦ç†å¯¾å¿œ
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- å˜ä½“ãƒ†ã‚¹ãƒˆä»˜ã
```

### ã‚¹ãƒ†ãƒƒãƒ—2: ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ™ãƒ¼ã‚¹ã®é–‹ç™º

#### 2.1 ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æŒ‡å®šã—ãŸå®Ÿè£…ä¾é ¼

å…·ä½“çš„ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æŒ‡å®šã—ã¦Kiroã«å®Ÿè£…ã‚’ä¾é ¼ï¼š

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†æ©Ÿèƒ½ã‚’Repository ãƒ‘ã‚¿ãƒ¼ãƒ³ã§å®Ÿè£…ã—ã¦ãã ã•ã„ã€‚

è¦ä»¶ï¼š
- User ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®å®šç¾©
- UserRepository ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
- DatabaseUserRepository å®Ÿè£…ã‚¯ãƒ©ã‚¹
- InMemoryUserRepository ãƒ†ã‚¹ãƒˆç”¨å®Ÿè£…
- å˜ä½“ãƒ†ã‚¹ãƒˆ

ä½¿ç”¨æŠ€è¡“ï¼š
- TypeScript
- Prisma ORM
- Jest
```

#### 2.2 ãƒ‘ã‚¿ãƒ¼ãƒ³ã®çµ„ã¿åˆã‚ã›

è¤‡æ•°ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’çµ„ã¿åˆã‚ã›ãŸå®Ÿè£…ï¼š

```
æ³¨æ–‡å‡¦ç†ã‚·ã‚¹ãƒ†ãƒ ã‚’ä»¥ä¸‹ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã§å®Ÿè£…ã—ã¦ãã ã•ã„ï¼š

- Repository ãƒ‘ã‚¿ãƒ¼ãƒ³: ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹
- Service ãƒ‘ã‚¿ãƒ¼ãƒ³: ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
- Command ãƒ‘ã‚¿ãƒ¼ãƒ³: æ³¨æ–‡å‡¦ç†ã‚³ãƒãƒ³ãƒ‰
- Observer ãƒ‘ã‚¿ãƒ¼ãƒ³: æ³¨æ–‡çŠ¶æ…‹å¤‰æ›´é€šçŸ¥
- Factory ãƒ‘ã‚¿ãƒ¼ãƒ³: æ”¯æ‰•ã„å‡¦ç†ã®ç”Ÿæˆ

å„ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å½¹å‰²ã‚’æ˜ç¢ºã«åˆ†é›¢ã—ã¦ãã ã•ã„ã€‚
```

### ã‚¹ãƒ†ãƒƒãƒ—3: ãƒ‘ã‚¿ãƒ¼ãƒ³ã®æ¤œè¨¼ã¨æ”¹å–„

#### 3.1 ãƒ‘ã‚¿ãƒ¼ãƒ³é©ç”¨ã®æ¤œè¨¼

å®Ÿè£…ã•ã‚ŒãŸãƒ‘ã‚¿ãƒ¼ãƒ³ã®æ¤œè¨¼ï¼š

```
å®Ÿè£…ã•ã‚ŒãŸRepository ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦ãã ã•ã„ã€‚

ç¢ºèªé …ç›®ï¼š
- ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®é©åˆ‡ãªæŠ½è±¡åŒ–
- å®Ÿè£…ã‚¯ãƒ©ã‚¹ã®è²¬ä»»ç¯„å›²
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®å¦¥å½“æ€§
- ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®è€ƒæ…®

æ”¹å–„ææ¡ˆãŒã‚ã‚Œã°æ•™ãˆã¦ãã ã•ã„ã€‚
```

#### 3.2 ãƒ‘ã‚¿ãƒ¼ãƒ³ã®æœ€é©åŒ–

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®æœ€é©åŒ–ï¼š

```
ç¾åœ¨ã®Repository ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä»¥ä¸‹ã®è¦ä»¶ã«åˆã‚ã›ã¦æœ€é©åŒ–ã—ã¦ãã ã•ã„ï¼š

- ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½ã®è¿½åŠ 
- ãƒãƒƒãƒå‡¦ç†å¯¾å¿œ
- æ¥½è¦³çš„ãƒ­ãƒƒã‚¯å¯¾å¿œ
- ç›£æŸ»ãƒ­ã‚°æ©Ÿèƒ½
- ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†

æ—¢å­˜ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’ç ´å£Šã—ãªã„ã‚ˆã†æ³¨æ„ã—ã¦ãã ã•ã„ã€‚
```

## ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ç‰¹æœ‰ã®ãƒ‘ã‚¿ãƒ¼ãƒ³

### React ãƒ‘ã‚¿ãƒ¼ãƒ³

#### Container/Presentational ãƒ‘ã‚¿ãƒ¼ãƒ³

**å•é¡Œ**: ãƒ­ã‚¸ãƒƒã‚¯ã¨UIã®åˆ†é›¢

**è§£æ±ºç­–**:
```typescript
// Presentational Component
interface UserListProps {
  users: User[];
  onUserSelect: (user: User) => void;
  loading: boolean;
}

const UserList: React.FC<UserListProps> = ({ users, onUserSelect, loading }) => {
  if (loading) return <div>Loading...</div>;
  
  return (
    <ul>
      {users.map(user => (
        <li key={user.id} onClick={() => onUserSelect(user)}>
          {user.name}
        </li>
      ))}
    </ul>
  );
};

// Container Component
const UserListContainer: React.FC = () => {
  const { data: users, isLoading } = useUsers();
  const navigate = useNavigate();
  
  const handleUserSelect = (user: User) => {
    navigate(`/users/${user.id}`);
  };
  
  return (
    <UserList 
      users={users || []} 
      onUserSelect={handleUserSelect}
      loading={isLoading}
    />
  );
};
```

#### Custom Hook ãƒ‘ã‚¿ãƒ¼ãƒ³

**å•é¡Œ**: ãƒ­ã‚¸ãƒƒã‚¯ã®å†åˆ©ç”¨

**è§£æ±ºç­–**:
```typescript
// ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
const useLocalStorage = <T>(key: string, initialValue: T) => {
  const [storedValue, setStoredValue] = useState<T>(() => {
    try {
      const item = window.localStorage.getItem(key);
      return item ? JSON.parse(item) : initialValue;
    } catch (error) {
      return initialValue;
    }
  });

  const setValue = (value: T | ((val: T) => T)) => {
    try {
      const valueToStore = value instanceof Function ? value(storedValue) : value;
      setStoredValue(valueToStore);
      window.localStorage.setItem(key, JSON.stringify(valueToStore));
    } catch (error) {
      console.error(error);
    }
  };

  return [storedValue, setValue] as const;
};

// ä½¿ç”¨ä¾‹
const UserSettings: React.FC = () => {
  const [theme, setTheme] = useLocalStorage('theme', 'light');
  
  return (
    <button onClick={() => setTheme(theme === 'light' ? 'dark' : 'light')}>
      Current theme: {theme}
    </button>
  );
};
```

### State Management ãƒ‘ã‚¿ãƒ¼ãƒ³

#### Flux/Redux ãƒ‘ã‚¿ãƒ¼ãƒ³

**å•é¡Œ**: è¤‡é›‘ãªçŠ¶æ…‹ç®¡ç†

**è§£æ±ºç­–**:
```typescript
// Action Types
const USER_ACTIONS = {
  FETCH_USERS_REQUEST: 'FETCH_USERS_REQUEST',
  FETCH_USERS_SUCCESS: 'FETCH_USERS_SUCCESS',
  FETCH_USERS_FAILURE: 'FETCH_USERS_FAILURE',
} as const;

// Actions
const fetchUsers = () => async (dispatch: Dispatch) => {
  dispatch({ type: USER_ACTIONS.FETCH_USERS_REQUEST });
  
  try {
    const users = await userService.getUsers();
    dispatch({ 
      type: USER_ACTIONS.FETCH_USERS_SUCCESS, 
      payload: users 
    });
  } catch (error) {
    dispatch({ 
      type: USER_ACTIONS.FETCH_USERS_FAILURE, 
      payload: error.message 
    });
  }
};

// Reducer
const userReducer = (state = initialState, action: AnyAction) => {
  switch (action.type) {
    case USER_ACTIONS.FETCH_USERS_REQUEST:
      return { ...state, loading: true };
    case USER_ACTIONS.FETCH_USERS_SUCCESS:
      return { ...state, loading: false, users: action.payload };
    case USER_ACTIONS.FETCH_USERS_FAILURE:
      return { ...state, loading: false, error: action.payload };
    default:
      return state;
  }
};
```

## ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ç‰¹æœ‰ã®ãƒ‘ã‚¿ãƒ¼ãƒ³

### APIè¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³

#### RESTful API ãƒ‘ã‚¿ãƒ¼ãƒ³

**å•é¡Œ**: ä¸€è²«æ€§ã®ã‚ã‚‹APIè¨­è¨ˆ

**è§£æ±ºç­–**:
```typescript
// ãƒªã‚½ãƒ¼ã‚¹ãƒ™ãƒ¼ã‚¹ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
app.get('/api/users', getUsersHandler);           // GET /users - ä¸€è¦§å–å¾—
app.get('/api/users/:id', getUserHandler);       // GET /users/1 - è©³ç´°å–å¾—
app.post('/api/users', createUserHandler);       // POST /users - ä½œæˆ
app.put('/api/users/:id', updateUserHandler);    // PUT /users/1 - æ›´æ–°
app.delete('/api/users/:id', deleteUserHandler); // DELETE /users/1 - å‰Šé™¤

// çµ±ä¸€ã•ã‚ŒãŸãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼
interface ApiResponse<T> {
  success: boolean;
  data?: T;
  error?: string;
  meta?: {
    total: number;
    page: number;
    limit: number;
  };
}
```

#### Middleware ãƒ‘ã‚¿ãƒ¼ãƒ³

**å•é¡Œ**: æ¨ªæ–­çš„é–¢å¿ƒäº‹ã®å‡¦ç†

**è§£æ±ºç­–**:
```typescript
// èªè¨¼ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
const authMiddleware = (req: Request, res: Response, next: NextFunction) => {
  const token = req.headers.authorization?.replace('Bearer ', '');
  
  if (!token) {
    return res.status(401).json({ error: 'Token required' });
  }
  
  try {
    const decoded = jwt.verify(token, process.env.JWT_SECRET!);
    req.user = decoded;
    next();
  } catch (error) {
    res.status(401).json({ error: 'Invalid token' });
  }
};

// ãƒ­ã‚°ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
const logMiddleware = (req: Request, res: Response, next: NextFunction) => {
  console.log(`${req.method} ${req.path} - ${new Date().toISOString()}`);
  next();
};

// ä½¿ç”¨ä¾‹
app.use(logMiddleware);
app.use('/api/protected', authMiddleware);
```

## ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æ§‹ç¯‰

### ã‚¹ãƒ†ãƒƒãƒ—1: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ç‰¹å®š

#### 1.1 å…±é€šå•é¡Œã®æŠ½å‡º

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ç¹°ã‚Šè¿”ã—ç¾ã‚Œã‚‹å•é¡Œã‚’ç‰¹å®šï¼š

```
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§é »ç¹ã«ç™ºç”Ÿã™ã‚‹è¨­è¨ˆä¸Šã®å•é¡Œã‚’åˆ†æã—ã¦ãã ã•ã„ã€‚

åˆ†æå¯¾è±¡ï¼š
- ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹å±¤ã®å®Ÿè£…
- API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®è¨­è¨ˆ
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- èªè¨¼ãƒ»èªå¯
- ãƒ­ã‚°å‡ºåŠ›

å„å•é¡Œã«å¯¾ã™ã‚‹ç¾åœ¨ã®è§£æ±ºæ–¹æ³•ã¨æ”¹å–„æ¡ˆã‚’ææ¡ˆã—ã¦ãã ã•ã„ã€‚
```

#### 1.2 ãƒ‘ã‚¿ãƒ¼ãƒ³ã®æ¨™æº–åŒ–

ç‰¹å®šã—ãŸå•é¡Œã«å¯¾ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ¨™æº–åŒ–ï¼š

```markdown
## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ãƒ‘ã‚¿ãƒ¼ãƒ³

### API ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ‘ã‚¿ãƒ¼ãƒ³

**å•é¡Œ**: ä¸€è²«æ€§ã®ãªã„ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹

**è§£æ±ºç­–**:
```typescript
class ApiError extends Error {
  constructor(
    public statusCode: number,
    public message: string,
    public code?: string
  ) {
    super(message);
  }
}

const errorHandler = (error: Error, req: Request, res: Response, next: NextFunction) => {
  if (error instanceof ApiError) {
    return res.status(error.statusCode).json({
      success: false,
      error: {
        message: error.message,
        code: error.code
      }
    });
  }
  
  // äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼
  res.status(500).json({
    success: false,
    error: {
      message: 'Internal server error'
    }
  });
};
```
```

### ã‚¹ãƒ†ãƒƒãƒ—2: ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ä½œæˆ

#### 2.1 ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚«ã‚¿ãƒ­ã‚°ã®æ§‹ç¯‰

```markdown
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ã‚«ã‚¿ãƒ­ã‚°

## ç›®æ¬¡
1. [ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ãƒ‘ã‚¿ãƒ¼ãƒ³](#data-access)
2. [APIè¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³](#api-design)
3. [èªè¨¼ãƒ‘ã‚¿ãƒ¼ãƒ³](#authentication)
4. [ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ‘ã‚¿ãƒ¼ãƒ³](#error-handling)
5. [ãƒ†ã‚¹ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³](#testing)

## ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ãƒ‘ã‚¿ãƒ¼ãƒ³ {#data-access}

### Repository + Unit of Work ãƒ‘ã‚¿ãƒ¼ãƒ³

**é©ç”¨å ´é¢**: è¤‡é›‘ãªãƒ‡ãƒ¼ã‚¿æ“ä½œãŒå¿…è¦ãªå ´åˆ

**å®Ÿè£…ä¾‹**:
```typescript
interface UnitOfWork {
  userRepository: UserRepository;
  orderRepository: OrderRepository;
  commit(): Promise<void>;
  rollback(): Promise<void>;
}
```

**ä½¿ç”¨æ–¹æ³•**:
```typescript
const uow = new DatabaseUnitOfWork();
try {
  const user = await uow.userRepository.findById(userId);
  const order = new Order(user, items);
  await uow.orderRepository.save(order);
  await uow.commit();
} catch (error) {
  await uow.rollback();
  throw error;
}
```
```

#### 2.2 ãƒ‘ã‚¿ãƒ¼ãƒ³é©ç”¨ã‚¬ã‚¤ãƒ‰

```markdown
## ãƒ‘ã‚¿ãƒ¼ãƒ³é¸æŠã‚¬ã‚¤ãƒ‰

### ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹å±¤

| è¦ä»¶ | æ¨å¥¨ãƒ‘ã‚¿ãƒ¼ãƒ³ | ç†ç”± |
|------|-------------|------|
| å˜ç´”ãªCRUD | Active Record | å®Ÿè£…ãŒç°¡å˜ |
| è¤‡é›‘ãªã‚¯ã‚¨ãƒª | Repository | ãƒ†ã‚¹ã‚¿ãƒ“ãƒªãƒ†ã‚£å‘ä¸Š |
| ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç† | Unit of Work | æ•´åˆæ€§ä¿è¨¼ |

### ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å±¤

| è¦ä»¶ | æ¨å¥¨ãƒ‘ã‚¿ãƒ¼ãƒ³ | ç†ç”± |
|------|-------------|------|
| è¤‡é›‘ãªè¨ˆç®— | Service | è²¬ä»»ã®åˆ†é›¢ |
| çŠ¶æ…‹å¤‰åŒ–ã®é€šçŸ¥ | Observer | ç–çµåˆ |
| æ¡ä»¶åˆ†å²ã®å¤šã„å‡¦ç† | Strategy | æ‹¡å¼µæ€§ |
```

## ãƒ‘ã‚¿ãƒ¼ãƒ³ã®é€²åŒ–ã¨æ”¹å–„

### ç¶™ç¶šçš„æ”¹å–„ãƒ—ãƒ­ã‚»ã‚¹

#### 1. ãƒ‘ã‚¿ãƒ¼ãƒ³ã®åŠ¹æœæ¸¬å®š

```
ç¾åœ¨ä½¿ç”¨ã—ã¦ã„ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã®åŠ¹æœã‚’æ¸¬å®šã—ã¦ãã ã•ã„ã€‚

æ¸¬å®šæŒ‡æ¨™ï¼š
- é–‹ç™ºé€Ÿåº¦ï¼ˆæ©Ÿèƒ½å®Ÿè£…æ™‚é–“ï¼‰
- ã‚³ãƒ¼ãƒ‰å“è³ªï¼ˆè¤‡é›‘åº¦ã€é‡è¤‡ç‡ï¼‰
- ãƒã‚°ç™ºç”Ÿç‡
- ä¿å®ˆæ€§ï¼ˆå¤‰æ›´å®¹æ˜“æ€§ï¼‰

æ”¹å–„ãŒå¿…è¦ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ç‰¹å®šã—ã¦ãã ã•ã„ã€‚
```

#### 2. æ–°ã—ã„ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å°å…¥

```
ä»¥ä¸‹ã®æ–°ã—ã„è¦ä»¶ã«å¯¾å¿œã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ææ¡ˆã—ã¦ãã ã•ã„ï¼š

è¦ä»¶ï¼š
- ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹é–“é€šä¿¡
- ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡
- å¤§é‡ãƒ‡ãƒ¼ã‚¿å‡¦ç†

æ—¢å­˜ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã®æ•´åˆæ€§ã‚’è€ƒæ…®ã—ã¦ãã ã•ã„ã€‚
```

#### 3. ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å»ƒæ­¢ã¨çµ±åˆ

```
ä½¿ç”¨é »åº¦ã®ä½ã„ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚„é‡è¤‡ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ•´ç†ã—ã¦ãã ã•ã„ã€‚

æ•´ç†å¯¾è±¡ï¼š
- éå»6ãƒ¶æœˆã§ä½¿ç”¨ã•ã‚Œã¦ã„ãªã„ãƒ‘ã‚¿ãƒ¼ãƒ³
- é¡ä¼¼æ©Ÿèƒ½ã‚’æŒã¤ãƒ‘ã‚¿ãƒ¼ãƒ³
- ä¿å®ˆã‚³ã‚¹ãƒˆã®é«˜ã„ãƒ‘ã‚¿ãƒ¼ãƒ³

çµ±åˆãƒ»å»ƒæ­¢ã®ææ¡ˆã‚’ã—ã¦ãã ã•ã„ã€‚
```

## ã¾ã¨ã‚

ãƒ‘ã‚¿ãƒ¼ãƒ³è¨€èªã®æ´»ç”¨ã«ã‚ˆã‚Šï¼š

1. **è¨­è¨ˆå“è³ªã®å‘ä¸Š**: å®Ÿè¨¼æ¸ˆã¿ã®è§£æ±ºç­–ã«ã‚ˆã‚‹ä¿¡é ¼æ€§
2. **é–‹ç™ºåŠ¹ç‡ã®å‘ä¸Š**: å†åˆ©ç”¨å¯èƒ½ãªã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³
3. **ãƒãƒ¼ãƒ å”åƒã®ä¿ƒé€²**: å…±é€šè¨€èªã«ã‚ˆã‚‹åŠ¹ç‡çš„ãªã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³
4. **çŸ¥è­˜ã®è“„ç©**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

æ¬¡ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€ã“ã‚Œã‚‰ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ´»ç”¨ã—ãŸå®Ÿéš›ã®è¨­è¨ˆãƒ»ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»å®Ÿè£…ãƒ•ãƒ­ãƒ¼ã«ã¤ã„ã¦å­¦ç¿’ã—ã¾ã™ã€‚

---

## ğŸ“š å­¦ç¿’é€²æ—ãƒã‚§ãƒƒã‚¯

ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Œäº†ã—ãŸã‚‰ã€ä»¥ä¸‹ã®é …ç›®ãŒã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„ï¼š

- [ ] è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³ã®åŸºæœ¬æ¦‚å¿µã¨é‡è¦æ€§ã‚’ç†è§£ã—ã¦ã„ã‚‹
- [ ] ä¸»è¦ãªè¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆç”Ÿæˆãƒ»æ§‹é€ ãƒ»æŒ¯ã‚‹èˆã„ï¼‰ã‚’èª¬æ˜ã§ãã‚‹
- [ ] Kiroã§ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ´»ç”¨ã—ãŸå®Ÿè£…ã‚’ä¾é ¼ã§ãã‚‹
- [ ] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’æ§‹ç¯‰ã§ãã‚‹
- [ ] ãƒ‘ã‚¿ãƒ¼ãƒ³ã®åŠ¹æœæ¸¬å®šã¨æ”¹å–„ãŒã§ãã‚‹

---

## ğŸ§­ ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³

| å‰ã¸ | ç›®æ¬¡ | æ¬¡ã¸ |
|------|------|------|
| [ğŸ“‹ 2.3 Steeringè¨­è¨ˆåŸå‰‡](steering-design-principles.md) | [ğŸ“– ç›®æ¬¡](../../README.md) | [ğŸ“ 2.5 è¨­è¨ˆãƒ»ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»å®Ÿè£…](design-review-implementation.md) |

### ğŸ“ ç¾åœ¨ã®ä½ç½®
**ç¬¬2ç« : æœ¬æ ¼çš„ãªã‚¢ãƒ—ãƒªã‚’ä½œã‚ã†** > **2.4 ãƒ‘ã‚¿ãƒ¼ãƒ³è¨€èªè§£èª¬** â† ç¾åœ¨ã“ã“

### ğŸ”— é–¢é€£ãƒªãƒ³ã‚¯
- [ğŸ“‹ Steeringãƒ•ã‚¡ã‚¤ãƒ«è¨­è¨ˆåŸå‰‡](steering-design-principles.md)
- [ğŸ› ï¸ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](../troubleshooting/common-issues.md)
- [ğŸ“ è¨­å®šãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ](../../templates/steering/)
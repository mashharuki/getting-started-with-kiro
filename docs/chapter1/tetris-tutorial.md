# Kiroを使ってテトリスを作ってみよう

このチュートリアルでは、Kiroを使って実際にテトリスゲームを作成します。Kiroのスペック駆動開発を体験し、AIとの協働による開発プロセスを学びましょう。

## 学習目標

- Kiroでの実際の開発プロセスを体験する
- スペック駆動開発の流れを理解する
- AIとの効果的な対話方法を学ぶ
- ローカル開発環境での動作確認方法を習得する

## 前提条件

- Kiroがインストールされていること
- 基本的なHTML/CSS/JavaScriptの知識
- ブラウザでの動作確認ができること

## ステップ1: プロジェクトの準備

### 1.1 Kiroの起動

1. Kiroを起動
2. 新しいプロジェクト用のフォルダを準備（例：`my-first-kiro`）
3. `File` → `Open Folder` でフォルダを選択
4. プロジェクトが開かれることを確認

## ステップ2: Kiroとの対話開始

### 2.1 最初の対話

Kiroのチャット画面で以下のように入力してみましょう：

```
こんにちは！テトリスゲームを作りたいです。
tetris-gameフォルダを作成して、その中にブラウザで動作するシンプルなテトリスを作成してください。
```

### 2.2 AIの応答を確認

Kiroは以下のような応答をするはずです：

- プロジェクト構造の提案（tetris-gameフォルダの作成）
- テトリスゲームの基本仕様の確認
- 技術スタック（HTML/CSS/JavaScript）の提案
- 実装方針の説明

**期待される応答例**:
```
テトリスゲームを作成しますね！まずtetris-gameフォルダを作成して、以下の仕様で進めましょう：

プロジェクト構造：
tetris-game/
├── index.html
├── style.css
└── script.js

基本機能：
- 7種類のテトリミノ（ブロック）
- ブロックの回転と移動
- ライン消去機能
- スコア表示
- ゲームオーバー判定

技術構成：
- HTML: ゲーム画面の構造
- CSS: スタイリング
- JavaScript: ゲームロジック
- Canvas API: ゲーム描画

フォルダを作成して実装を開始しますか？
```

## ステップ3: スペック駆動開発の実践

### 3.1 Specの作成

チャットで以下のように入力：

```
はい、お願いします。まずはSpecを作成して、要件から順番に進めましょう。
```

Kiroが自動的にSpecファイルを作成し、以下の流れで進めます：

1. **要件作成**: テトリスゲームの要件定義
2. **設計**: アーキテクチャとコンポーネント設計
3. **タスク分割**: 実装可能な単位への分割

### 3.2 要件の確認と調整

Kiroが作成した要件を確認し、必要に応じて調整します：

```
要件を確認しました。以下の点を追加してください：
- キーボード操作（矢印キー、スペースキー）
- 一時停止機能
- レベル（落下速度）の調整
```

### 3.3 設計の確認

設計ドキュメントが作成されたら、内容を確認：

- ゲームループの設計
- データ構造（ゲームボード、テトリミノ）
- イベント処理の仕組み

## ステップ4: 実装の開始

### 4.1 最初のタスクの実行

Specのタスクリストから最初のタスクを実行：

```
最初のタスク「基本的なHTML構造の作成」を実行してください。
```

### 4.2 ファイルの確認

Kiroが作成したファイル構造を確認：

```
tetris-game/
├── index.html          # メインのHTMLファイル
├── style.css           # スタイルシート
└── script.js           # JavaScriptファイル
```

各ファイルがtetris-gameフォルダ内に正しく作成されていることを確認してください。

### 4.3 段階的な実装

各タスクを順番に実行し、動作確認を行います：

1. HTML構造の作成
2. 基本スタイルの適用
3. ゲームボードの描画
4. テトリミノの定義
5. 基本的な移動機能
6. 回転機能
7. ライン消去機能
8. スコア機能

## ステップ5: ローカルサーバーの起動と動作確認

### 5.1 ローカルサーバーの起動

tetris-gameフォルダに移動してからサーバーを起動します：

#### 方法1: Python（推奨）

```bash
cd tetris-game

# Python 3の場合
python -m http.server 8000

# Python 2の場合
python -m SimpleHTTPServer 8000
```

#### 方法2: Node.js

```bash
cd tetris-game

# http-serverをインストール（初回のみ）
npm install -g http-server

# サーバー起動
http-server
```

#### 方法3: Live Server（VS Code拡張）

1. VS Codeで`tetris-game/index.html`を開く
2. 右クリック → `Open with Live Server`

### 5.2 ブラウザでの確認

1. ブラウザで `http://localhost:8000` にアクセス
2. テトリスゲームが表示されることを確認
3. 基本操作をテスト：
   - 矢印キー: ブロックの移動
   - 上矢印: ブロックの回転
   - スペースキー: 高速落下

### 5.3 動作確認のチェックポイント

- [ ] ゲームボードが正しく表示される
- [ ] テトリミノが上から落下する
- [ ] 左右の移動ができる
- [ ] 回転機能が動作する
- [ ] ライン消去が正しく動作する
- [ ] スコアが正しく表示される
- [ ] ゲームオーバーが適切に判定される

## ステップ6: 要件・設計の修正実践

### 6.1 改善点の発見

実際にゲームをプレイして改善点を見つけます：

```
ゲームをテストしました。以下の改善をお願いします：
1. ブロックの落下速度が速すぎます
2. 次のブロックのプレビューを追加してください
3. ハードドロップ（一気に落下）機能を追加してください
```

### 6.2 要件の更新

Kiroに要件の更新を依頼：

```
Specの要件を更新して、上記の改善点を反映してください。
```

### 6.3 設計の調整

設計ドキュメントも合わせて更新：

- プレビュー機能のUI設計
- ハードドロップの実装方針
- 速度調整のパラメータ設計

### 6.4 実装の修正

更新されたタスクを実行して改善を実装：

```
更新されたタスクリストに従って、改善を実装してください。
```

## ステップ7: 最終確認とデバッグ

### 7.1 総合テスト

全ての機能が正しく動作することを確認：

1. **基本操作**: 移動、回転、落下
2. **ゲームルール**: ライン消去、スコア計算
3. **UI機能**: プレビュー、一時停止
4. **エラーハンドリング**: 不正な操作への対応

### 7.2 デバッグの実践

問題が見つかった場合のデバッグ方法：

```
ブロックが画面外に出てしまうバグがあります。
デバッグして修正してください。
```

Kiroがデバッグ手順を提案し、修正を実行します。

### 7.3 コードの最適化

```
コードをレビューして、最適化できる部分があれば改善してください。
```

## ステップ8: 学習の振り返り

### 8.1 開発プロセスの振り返り

今回の開発で体験したこと：

- **要件定義**: 曖昧な要件から具体的な仕様への変換
- **設計**: 実装可能な設計への落とし込み
- **実装**: 段階的な機能追加
- **テスト**: 動作確認と改善のサイクル

### 8.2 Kiroの活用ポイント

効果的だった使い方：

- 明確な指示による効率的な開発
- 段階的な確認による品質向上
- 柔軟な要件変更への対応

### 8.3 改善できる点

次回に活かせる学び：

- より詳細な要件定義の重要性
- テストケースの事前準備
- エラーハンドリングの考慮

## 完成したファイル構成

Kiroによって以下のファイル構成が作成されます：

```
プロジェクトルート/
├── tetris-game/              # Kiroが作成するゲームフォルダ
│   ├── index.html           # メインHTMLファイル
│   ├── style.css            # スタイルシート
│   └── script.js            # ゲームロジック
└── .kiro/
    └── specs/
        └── tetris-game/
            ├── requirements.md  # 要件定義
            ├── design.md       # 設計書
            └── tasks.md        # タスクリスト
```

**重要**: ゲームファイルは`tetris-game`フォルダ内に、Specファイルは`.kiro/specs/tetris-game`フォルダ内に分けて管理されます。

## 次のステップ

テトリスゲームの作成を通じて、Kiroの基本的な使い方を学びました。次は、より高度な機能であるMCPを使ったテストについて学習しましょう。

## トラブルシューティング

### よくある問題と解決方法

#### 問題1: ローカルサーバーが起動しない

**解決方法**:
```bash
# ポートが使用中の場合、別のポートを使用
python -m http.server 8080
```

#### 問題2: ブロックが正しく表示されない

**解決方法**:
```
ブラウザの開発者ツール（F12）でコンソールエラーを確認し、
エラーメッセージをKiroに報告してください。
```

#### 問題3: キーボード操作が効かない

**解決方法**:
```
ゲーム画面をクリックしてフォーカスを当ててから操作してください。
```

## まとめ

このチュートリアルでは：

1. **Kiroの基本操作**を学習
2. **スペック駆動開発**を実践
3. **実際のアプリケーション**を作成
4. **動作確認とデバッグ**を体験
5. **要件変更への対応**を学習

これらの経験を通じて、Kiroを使った効率的な開発プロセスを理解できました。

---

## 📚 学習進捗チェック

このセクションを完了したら、以下の項目ができるようになっているか確認してください：

- [ ] Kiroでスペック駆動開発を実践できる
- [ ] AIとの効果的な対話ができる
- [ ] ローカルサーバーを起動してアプリを動作確認できる
- [ ] 要件や設計の修正を適切に行える
- [ ] 基本的なデバッグができる

---

<div align="center">

| [← 📖 Kiro解説](kiro-introduction.md) | [🏠 目次](../../README.md) | [🧪 Playwright MCP →](playwright-mcp-testing.md) |
|:---:|:---:|:---:|

</div>

---

### 🔗 関連リソース
- [🎮 テトリス完成版](../../examples/tetris-backup/)
- [🛠️ トラブルシューティング](../troubleshooting/common-issues.md)
- [❓ FAQ](../troubleshooting/faq.md)